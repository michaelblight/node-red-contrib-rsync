<script type="text/javascript">
    RED.nodes.registerType('rsync', {
        category: 'advanced',
        color: '#a6bbcf',
        defaults: {
		name: { value: ""},
		source: { value: "" },
		destination: { value: "" },
		verbose: { value: "" },
		recursive: { value: "" },
        },
        inputs: 1,
        outputs: 2,
        icon: "file.png",
        label: function() {
            return this.name || "rsync";
        }
    });
</script>

<script type="text/x-red" data-template-name="rsync">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-source"><i class="fa fa-file-text-o"></i> Source</label>
        <input type="text" id="node-input-source" placeholder="Source">
    </div>
    <div class="form-row">
        <label for="node-input-destination"><i class="fa fa-file-text-o"></i> Destination</label>
        <input type="text" id="node-input-destination" placeholder="Destination">
    </div>
    <div class="form-row">
        <label for="node-input-verbose"><i class="fa fa-bug"></i> Verbose</label>
        <input type="checkbox" id="node-input-verbose" style="display: inline-block; width: auto; vertical-align: top;">
    </div>
    <div class="form-row">
        <label for="node-input-recursive"><i class="fa fa-bug"></i> Recursive</label>
        <input type="checkbox" id="node-input-recursive" style="display: inline-block; width: auto; vertical-align: top;">
    </div>
</script>

<script type="text/x-red" data-help-name="rsync">
<p>Uses rsyncwrapper to call rsync.</p>
<p>The node can be configured with the source and destination, as well as the options below.</p>
<p>When configured through the dialog, the source can only be a single folder or filename. However, when configured
through msg, the source can also be an array of folders or filenames.</p>

<h3>Inputs</h3>
<p>The following can be overridden by including them in the input msg</p>
<dl class="message-properties">
	<dt>source
        	<span class="property-type">string or array</span>
        </dt>
	<dd>The folder or filename to copy from. Can also be an array of folders and filenames.</dd>
	<dt>destination
                <span class="property-type">string</span>
        </dt>
	<dd>The folder or filename to copy to.</dd>
        <dt>verbose
                <span class="property-type">boolean</span>
        </dt>
        <dd>Include verbose flag on rsync command.</dd>
	<dt>recursive
                <span class="property-type">boolean</span>
        </dt>
	<dd>Recursively copy child folders.</dd>
</dl>
<h3>Outputs</h3>
<dl class="message-properties">
The resulting message will be sent to the first output if successfully, or the second output upon failure. The message will contain
all of the input properties, as well as the following as appropriate:

	<dt>error
                <span class="property-type">string</span>
        </dt>
	<dt>stdout
                <span class="property-type">string</span>
        </dt>
        <dt>stderr
                <span class="property-type">string</span>
        </dt>
        <dt>cmd
                <span class="property-type">string</span>
	<dd>The command line as sent to rsync.</dd>
        </dt>
</script>
